
<!DOCTYPE html>
<html>
    <head>
        {% block header %}
            <title>{{title}} | {{ site.title }}</title>
        {% endblock %}

        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="description" content="Back off man, I'm a web developer.">
        {% block twittercard %}
        <meta name="twitter:card" content="summary">
        <meta name="twitter:site" content="@sonniesedge">
        <meta name="twitter:title" content="Back off man, I'm a web developer | sonniesedge">
        <meta name="twitter:url" content="http://sonniesedge.co.uk/">
        <meta name="twitter:description" content="Sonniesedge: Human, web developer, redhead.">
        <meta name="twitter:image:src" content="http://sonniesedge.co.uk/images/pages/photo.jpg">
        {% endblock %}
        <link rel="stylesheet" href="/css/main.css" type="text/css" />
        <link rel="alternate" type="text/xml" title="RSS feed for posts" href="{{ site.url }}/rss.xml">
        <link rel="alternate" type="text/xml" title="RSS feed for bookmarks" href="{{ site.url }}/bookmarks.xml">
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto+Slab">
        <link rel="pingback" href="https://webmention.io/sonniesedge.co.uk/xmlrpc" />
        <link rel="webmention" href="https://webmention.io/sonniesedge.co.uk/webmention" />
    </head>
    <body>
        <div class="comp-mainlayout">
            <header>
                <nav class="comp-sidebar comp-mainlayout__sidebar">
                    <a href="/about/" class="comp-sidebar__photoframe"><img src="/images/pages/photo.jpg" class="u-photo comp-sidebar__photo" alt="A photo of Charlie Owen. She is white, with red hair, and green eyes."></a>
                    <ul class="comp-sidebar__list">
                        {% for item in mainnav %}
                            {% if item.path == '//' %}
                                {% set newpath = '/' %}
                            {% else %}
                                {% set newpath = item.path %}
                            {% endif %}
                            <li class="comp-sidebar__item {% if item.path == path %}comp-sidebar__item--current{% endif %}"><a class="comp-sidebar__link" href="{{ newpath }}">{{ item.title }}</a></li>
                        {% endfor %}
                    </ul>

                </nav>
            </header>
            <main class="comp-mainlayout__content">
                {% block content %}
                    <h1>{% if realtitle %}{{ realtitle }}{% else %}{{ title }}{% endif %}</h1>
                    {{ contents | safe }}
                {% endblock %}

                {% block list %}
                {% endblock %}
            </main>

            {% if webmentionCount %}
            <section class="comp-mainlayout__mentions">


                <h1>Feedback</h1>
                <p>This page has found <strong>{{ webmentionCount }}</strong> mentions of itself on the glorious World Wide Web!</p>

                <p>There's probably a lot more, but this site relies on <a href="https://brid.gy/">brid.gy</a> to discover <a href="https://indieweb.org/webmention">webmentions</a> from social media. Retreiving these social media replies/likes/reposts is still unreliable (due to the social media giants' APIs) and many mentions of a page get missed!</p>

                {% if webmentionLinks %}
                    <h2>Links</h2>
                    <ul class="comp-wm-links">
                    {% for item in webmentionLinks %}
                        <li id="{{ item.id }}" class="comp-wm-links__item"> 
                            <img src="{{ item.author_photo }}" class="comp-wm-links__image">
                            <a href="{{ item.author_url }}" class="comp-wm-links__title">{{ item.author_name }}</a>
                            <div  class="comp-wm-links__body">
                                {{ item.content | safe}}
                            </div>
                            <div class="comp-wm-links__footer">
                            <a href="#{{ item.id }}">#</a> <a href="{{ item.link_source }}">{{ item.date }}</a>
                            </div>
                        </li>
                    {% endfor %}
                    </ul>
                {% endif %}

                {% if webmentionLikes %}
                    <h2>Likes</h2>
                    <ul class="">
                    {% for item in webmentionLikes %}
                        <li class="" id="{{ item.id }}"><a href="#{{ item.id }}">#</a> <a href="{{ item.author_url }}" class="">{{ item.author_name }}</a></li>
                    {% endfor %}
                    </ul>
                {% endif %}

                {% if webmentionReposts %}
                    <h2>Reposts</h2>
                    <ul>
                    {% for item in webmentionReposts %}
                        <li id="{{ item.id }}"><a href="#{{ item.id }}">#</a> <a href="{{ item.author_url }}">{{ item.author_name }}</a> on <a href="{{ item.repost_source }}">{{ item.date }}</a>.</li>
                    {% endfor %}
                    </ul>
                {% endif %}
            </section>
            {% endif %}

            <footer class="comp-footer comp-mainlayout__footer">
                <p class="comp-footer__text">&copy; Some shit about copyright and year that isn't actually in any way relevant or legal, but is a classic "we've always done it like that" thing.</p>
                
                <ul class="comp-footer__contacts">
                  <li>Email: <a href="mailto:charlie@sonniesedge.co.uk" rel="me">charlie@sonniesedge.co.uk</a></li>
                  <li>Twitter: <a href="https://twitter.com/sonniesedge" rel="me">@sonniesedge</a></li>
                  <li>Github: <a href="https://github.com/sonniesedge" rel="me">@sonniesedge</a></li>
                  <li>Site source: <a href="https://github.com/sonniesedge/sonniesedge-website">View on Github</a>.</li>
                </ul>

            </footer>
        </div>
        
        <script async src="https://www.googletagmanager.com/gtag/js?id=UA-22165967-2"></script>
        <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', 'UA-22165967-2');
        </script>

    </body>
</html>
